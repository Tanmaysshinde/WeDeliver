{% extends 'Base.html' %}
{% load widget_tweaks %}

{% block title %}My Profile{% endblock title %}

{% block content3 %}

<div class="margintop container mb-4">
    {% for message in messages %}
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="fas fa-check-circle" style="height: 20; width: 20"></i> {{ message }}.
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
    <div class="card p-2">
    <form action="" method="POST" enctype="multipart/form-data">
        {% csrf_token %}    
            <div class="row mt-2">
                <div class="col-sm-3 d-flex flex-column align-items-center text-center p-3 py-3">
                    {% if user.profile.image %}
                    <img class="rounded-circle" src="{{ user.profile.image.url }}">
                    {% endif %}
                    <span>{% render_field profile.image class="form-control mt-2 mb-2" %}</span>
                    <span class="font-weight-bold">{{ user.first_name}} {{ user.last_name }}</span>
                    <span class="text-black-50">{{ user.email }}</span>
                </div>
                <div class="col-sm-1"></div>
                <div class="col-sm-7">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="mt-2">
                                <i class="fas fa-user"></i> <b>First Name :</b>
                            </div>
                            <div class="mt-1">
                                {% render_field User.first_name value=user.first_name %}
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="mt-2">
                                <i class="fas fa-user"></i> <b>Last name :</b>
                                <div class="mt-1">
                                    {% render_field User.last_name value=user.last_name %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-sm-6">
                            <b><i class="fas fa-phone"></i> Mobile Number :</b>
                            {% if user.profile.phone_no == 'None' or user.profile.phone_no == None %}
                                {% render_field profile.phone_no %}
                            {% else %}
                                {% render_field profile.phone_no value=user.profile.phone_no %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-sm-6">
                            <b><i class="fas fa-map-marker-alt"></i> Address :</b>
                            {% if user.profile.address == 'None' or user.profile.address == None %}
                                {% render_field profile.address %}
                            {% else %}
                                {% render_field profile.address value=user.profile.address %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-sm-6">
                            <b><i class="fas fa-envelope"></i> Email ID :</b>
                            {% if user.email == 'None' or user.email == None %}
                                {% render_field User.email %}
                            {% else %}
                                {% render_field User.email value=user.email %}
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mb-2">
                <div class="text-center">
                    <button class="btn btn-primary" formaction="{% url 'update-profile' user.id user.profile.id %}">Save Profile</button>
                </div>
            </div>
        </form> 
    </div>
</div>

{% endblock content3 %}